/**
 * tdesign v1.9.5
 * (c) 2024 tdesign
 * @license MIT
 */

import { computed, ref, onMounted, nextTick } from 'vue';
import observe from '../../_common/js/utils/observe.mjs';
import { isServer } from '../../utils/dom.mjs';
import '../../_chunks/dep-0659d768.mjs';
import '../../_chunks/dep-78b9feac.mjs';
import '../../_chunks/dep-f731006d.mjs';
import '../../_chunks/dep-ca297029.mjs';
import '../../_chunks/dep-9672d334.mjs';
import '../../_chunks/dep-6bcf8998.mjs';
import '../../_chunks/dep-de53e2e8.mjs';
import '../../_chunks/dep-c35bb50c.mjs';
import '../../_chunks/dep-79da3af4.mjs';
import '../../_chunks/dep-e242a06a.mjs';
import '../../utils/easing.mjs';

function useLazyLoad(containerRef, childRef, params) {
  var tRowHeight = computed(function () {
    return Math.max(params.rowHeight || 48, 48);
  });
  var isInit = ref(false);
  var hasLazyLoadHolder = computed(function () {
    return (params === null || params === void 0 ? void 0 : params.type) === "lazy" && !isInit.value;
  });
  var requestAnimationFrame = !isServer && window.requestAnimationFrame || function (cb) {
    return setTimeout(cb, 16.6);
  };
  var init = function init() {
    if (!isInit.value) {
      requestAnimationFrame(function () {
        isInit.value = true;
      });
    }
  };
  onMounted(function () {
    if ((params === null || params === void 0 ? void 0 : params.type) !== "lazy") return;
    nextTick(function () {
      var bufferSize = Math.max(10, params.bufferSize || 10);
      var height = tRowHeight.value * bufferSize;
      if (!(childRef !== null && childRef !== void 0 && childRef.value) || !(containerRef !== null && containerRef !== void 0 && containerRef.value)) return;
      observe(childRef.value, containerRef.value, init, height);
    });
  });
  return {
    hasLazyLoadHolder: hasLazyLoadHolder,
    tRowHeight: tRowHeight
  };
}

export { useLazyLoad as default };
//# sourceMappingURL=useLazyLoad.mjs.map
